{"version":3,"file":"js/736.1e960fc2.js","mappings":"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","sources":["webpack://demo/./src/views/Posting.vue","webpack://demo/./src/api/postingApi.js","webpack://demo/./src/api/journalEntryApi.js","webpack://demo/src/views/Posting.vue","webpack://demo/./src/views/Posting.vue?a116","webpack://demo/./src/views/Posting.vue?29b9","webpack://demo/./src/api/request.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"posting-container\"},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"过账管理\")]),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新增过账\")])],1),_c('el-form',{staticClass:\"search-form\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"会计分录ID\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择会计分录\"},model:{value:(_vm.searchForm.entryId),callback:function ($$v) {_vm.$set(_vm.searchForm, \"entryId\", $$v)},expression:\"searchForm.entryId\"}},_vm._l((_vm.journalEntryList),function(entry){return _c('el-option',{key:entry.id,attrs:{\"label\":_vm.formatJournalEntryText(entry),\"value\":entry.id}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"查询\")]),_c('el-button',{on:{\"click\":_vm.resetSearch}},[_vm._v(\"重置\")])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.postingList}},[_c('el-table-column',{attrs:{\"prop\":\"entryId\",\"label\":\"会计分录\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.forEnText(scope.row.entryId))+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"postingDate\",\"label\":\"过账日期\"}}),_c('el-table-column',{attrs:{\"prop\":\"postingUserId\",\"label\":\"过账用户\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next, jumper, total\",\"total\":_vm.total,\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}})],1)],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"title\":_vm.dialogTitle,\"width\":\"800px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"formRef\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"会计分录\",\"prop\":\"entryId\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择会计分录\"},model:{value:(_vm.formData.entryId),callback:function ($$v) {_vm.$set(_vm.formData, \"entryId\", $$v)},expression:\"formData.entryId\"}},_vm._l((_vm.journalEntryList),function(entry){return _c('el-option',{key:entry.id,attrs:{\"label\":_vm.formatJournalEntryText(entry),\"value\":entry.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"过账日期\",\"prop\":\"postingDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"选择过账日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.formData.postingDate),callback:function ($$v) {_vm.$set(_vm.formData, \"postingDate\", $$v)},expression:\"formData.postingDate\"}})],1),_c('el-form-item',{attrs:{\"label\":\"过账账户\",\"prop\":\"postingUserId\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入过账用户\"},model:{value:(_vm.formData.postingUserId),callback:function ($$v) {_vm.$set(_vm.formData, \"postingUserId\", $$v)},expression:\"formData.postingUserId\"}})],1)],1),_c('template',{slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确定\")])],1)],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/api/request';\n\nexport function getPostingPage(params) {\n  return request({\n    url: '/posting/page',\n    method: 'get',\n    params\n  });\n}\n\nexport function getPostingList(params) {\n  return request({\n    url: '/posting/list',\n    method: 'get',\n    params\n  });\n}\n\n/**\n * 根据ID获取过账信息\n * @param {number} id 过账ID\n * @returns {Promise}\n */\nexport function getPostingById(id) {\n  return request({\n    url: `/posting/${id}`,\n    method: 'get'\n  });\n}\n\n/**\n * 保存过账信息（新增或更新）\n * @param {Object} data 过账数据\n * @param {number} data.id 过账ID（更新时必需）\n * @param {number} data.entryId 会计分录ID\n * @param {string} data.postingDate 过账日期\n * @param {number} data.postingUserId 过账用户ID\n * @returns {Promise}\n */\nexport function savePosting(data) {\n  // 确保只传递后端实体类需要的字段\n  const entityData = {\n    id: data.id,\n    entryId: data.entryId,\n    postingDate: data.postingDate,\n    postingUserId: data.postingUserId\n  };\n\n  return request({\n    url: data.id ? '/posting/update' : '/posting/insert',\n    method: data.id ? 'put' : 'post',\n    data: entityData\n  });\n}\n\n/**\n * 删除过账信息\n * @param {number} id 过账ID\n * @returns {Promise}\n */\nexport function deletePosting(id) {\n  return request({\n    url: `/posting/${id}`,\n    method: 'delete'\n  });\n}\n\n/**\n * 批量删除过账信息\n * @param {Array} ids 过账ID数组\n * @returns {Promise}\n */\nexport function batchDeletePosting(ids) {\n  return request({\n    url: '/posting/batchDelete',\n    method: 'delete',\n    data: ids\n  });\n}\n","import request from '@/api/request';\n\n/**\n * 获取会计分录列表\n * @param {Object} params 查询参数\n * @param {number} params.pageNum 页码\n * @param {number} params.pageSize 每页条数\n * @returns {Promise}\n */\nexport function getJournalEntryList(params = {}) {\n  return request({\n    url: '/journal-entry/page',\n    method: 'get',\n    params: {\n      pageNum: params.pageNum || 1,\n      pageSize: params.pageSize || 100, // 默认获取较多数据用于下拉选择\n      ...params\n    }\n  });\n}\n\n/**\n * 获取所有会计分录（不分页）\n * @returns {Promise}\n */\nexport function getAllJournalEntries() {\n  return request({\n    url: '/journalEntry/all',\n    method: 'get'\n  });\n}\n","<template>\n  <div class=\"posting-container\">\n    <el-card>\n      <div slot=\"header\" class=\"clearfix\">\n        <span>过账管理</span>\n        <el-button type=\"primary\" size=\"small\" @click=\"handleAdd\" style=\"float: right\">新增过账</el-button>\n      </div>\n\n      <!-- 搜索条件 -->\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"search-form\">\n        <el-form-item label=\"会计分录ID\">\n          <el-select v-model=\"searchForm.entryId\" placeholder=\"请选择会计分录\">\n            <el-option\n              v-for=\"entry in journalEntryList\"\n              :key=\"entry.id\"\n              :label=\"formatJournalEntryText(entry)\"\n              :value=\"entry.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\n          <el-button @click=\"resetSearch\">重置</el-button>\n        </el-form-item>\n      </el-form>\n\n      <!-- 数据表格 -->\n      <el-table\n        v-loading=\"loading\"\n        :data=\"postingList\"\n        style=\"width: 100%\"\n      >\n        <el-table-column prop=\"entryId\" label=\"会计分录\">\n          <template slot-scope=\"scope\">\n            {{forEnText(scope.row.entryId)}}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"postingDate\" label=\"过账日期\"></el-table-column>\n        <el-table-column prop=\"postingUserId\" label=\"过账用户\"></el-table-column>\n        <el-table-column label=\"操作\" width=\"150\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(scope.row.id)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <div class=\"pagination\">\n        <el-pagination\n          background\n          layout=\"prev, pager, next, jumper, total\"\n          :total=\"total\"\n          :current-page=\"currentPage\"\n          :page-size=\"pageSize\"\n          @current-change=\"handleCurrentChange\"\n          @size-change=\"handleSizeChange\"\n        ></el-pagination>\n      </div>\n    </el-card>\n\n    <!-- 表单对话框 -->\n    <el-dialog\n        :visible.sync=\"dialogVisible\"\n      :title=\"dialogTitle\"\n      width=\"800px\"\n    >\n      <el-form :model=\"formData\" :rules=\"rules\" ref=\"formRef\" label-width=\"120px\">\n        <el-form-item label=\"会计分录\" prop=\"entryId\">\n          <el-select v-model=\"formData.entryId\" style=\"width: 100%;\" placeholder=\"请选择会计分录\">\n            <el-option\n              v-for=\"entry in journalEntryList\"\n              :key=\"entry.id\"\n              :label=\"formatJournalEntryText(entry)\"\n              :value=\"entry.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"过账日期\"  prop=\"postingDate\">\n          <el-date-picker\n              style=\"width: 100%;\"\n            v-model=\"formData.postingDate\"\n            type=\"date\"\n            placeholder=\"选择过账日期\"\n            value-format=\"yyyy-MM-dd\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"过账账户\" prop=\"postingUserId\">\n          <el-input v-model=\"formData.postingUserId\" placeholder=\"请输入过账用户\" />\n        </el-form-item>\n      </el-form>\n      <template slot=\"footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit\">确定</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {getPostingList, getPostingById, savePosting, deletePosting, getPostingPage} from '@/api/postingApi';\nimport {getJournalEntryList} from '@/api/journalEntryApi';\n\nexport default {\n  name: \"Posting\",\n  data() {\n    return {\n      loading: false,\n      postingList: [],\n      journalEntryList: [], // 会计分录列表\n      searchForm: {\n        postingDate: '',\n        entryId: null\n      },\n      formData: {\n        id: null,\n        entryId: null,\n        postingDate: '',\n        postingUserId: null\n      },\n      dialogVisible: false,\n      dialogTitle: '',\n      formRef: null,\n      total: 0,\n      currentPage: 1,\n      pageSize: 10,\n      rules: {\n        entryId: [\n          { required: true, message: '请输入会计分录ID', trigger: 'blur' },\n        ],\n        postingDate: [\n          { required: true, message: '请选择过账日期', trigger: 'change' }\n        ],\n        postingUserId: [\n          { required: true, message: '请输入过账用户ID', trigger: 'blur' },\n        ]\n      }\n    };\n  },\n  mounted() {\n    this.loadJournalEntries();\n    this.loadData();\n  },\n  methods: {\n    forEnText(id) {\n      for(let item of this.journalEntryList) {\n        if (item.id === id) {\n          return this.formatJournalEntryText(item);\n        }\n      }\n      return \"\"\n    },\n    // 加载会计分录列表\n    async loadJournalEntries() {\n      try {\n        const response = await getJournalEntryList();\n        this.journalEntryList = response.data.records || [];\n      } catch (error) {\n        console.error('获取会计分录列表失败:', error);\n        this.$message.error('获取会计分录列表失败');\n      }\n    },\n\n    // 格式化会计分录显示文本\n    formatJournalEntryText(entry) {\n      if (!entry) return '';\n      return `${entry.voucherNo} - ${entry.voucherDate} - ${entry.summary}`;\n    },\n\n    // 加载数据\n    async loadData() {\n      this.loading = true;\n      try {\n        const response = await getPostingPage({\n          ...this.searchForm,\n          pageNum: this.currentPage,\n          pageSize: this.pageSize\n        });\n        const responseData = response.data || {};\n        this.postingList = responseData.records || [];\n        this.total = responseData.total || 0;\n      } catch (error) {\n        this.$message.error('获取过账列表失败');\n        console.error('获取过账列表失败:', error);\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 查询\n    handleSearch() {\n      this.currentPage = 1;\n      this.loadData();\n    },\n\n    // 重置查询条件\n    resetSearch() {\n      this.searchForm = {\n        postingDate: '',\n        entryId: null\n      };\n      this.loadData();\n    },\n\n    // 刷新数据\n    refreshData() {\n      this.loadData();\n    },\n\n    // 新增\n    handleAdd() {\n      this.dialogTitle = '新增过账';\n      this.resetForm();\n      this.dialogVisible = true;\n    },\n\n    // 编辑\n    async handleEdit(row) {\n      try {\n        this.formData = {...row};\n        this.dialogTitle = '编辑过账';\n        this.dialogVisible = true;\n      } catch (error) {\n        this.$message.error('获取过账详情失败');\n        console.error('获取过账详情失败:', error);\n      }\n    },\n\n    // 删除\n    handleDelete(id) {\n      this.$confirm('确定要删除这条过账记录吗？', '确认删除', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await deletePosting(id);\n          this.$message.success('删除成功');\n          this.loadData();\n        } catch (error) {\n          this.$message.error('删除失败');\n          console.error('删除过账失败:', error);\n        }\n      }).catch(() => {});\n    },\n\n    // 提交表单\n    async handleSubmit() {\n      this.$refs.formRef.validate(async (valid) => {\n        if (valid) {\n          try {\n            await savePosting(this.formData);\n            this.$message.success('保存成功');\n            this.dialogVisible = false;\n            this.loadData();\n          } catch (error) {\n            this.$message.error('保存失败');\n            console.error('保存过账失败:', error);\n          }\n        }\n      });\n    },\n\n    // 重置表单\n    resetForm() {\n      if (this.$refs.formRef) {\n        this.$refs.formRef.resetFields();\n      }\n      this.formData = {\n        id: null,\n        entryId: null,\n        postingDate: '',\n        postingUserId: null\n      };\n    },\n\n    // 格式化日期\n    formatDate(row, column) {\n      const date = row[column.property];\n      if (date) {\n        return new Date(date).toLocaleDateString('zh-CN');\n      }\n      return '';\n    },\n\n    // 分页变化\n    handleCurrentChange(current) {\n      this.currentPage = current;\n      this.loadData();\n    },\n\n    handleSizeChange(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n      this.loadData();\n    },\n\n\n  }\n};\n</script>\n\n<style scoped>\n.posting-container {\n  padding: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.search-form {\n  margin-bottom: 20px;\n}\n\n.toolbar {\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: flex-start;\n  gap: 10px;\n}\n\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Posting.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Posting.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Posting.vue?vue&type=template&id=7d7d75e8&scoped=true\"\nimport script from \"./Posting.vue?vue&type=script&lang=js\"\nexport * from \"./Posting.vue?vue&type=script&lang=js\"\nimport style0 from \"./Posting.vue?vue&type=style&index=0&id=7d7d75e8&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d7d75e8\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\nimport store from '../store'\nimport { Message } from 'element-ui'\n\n// 创建axios实例\nconst service = axios.create({\n  timeout: 5000\n})\n\n// 请求拦截器\nservice.interceptors.request.use(\n  config => {\n    // 添加token\n    if (store.state.token) {\n      config.headers['Authorization'] = 'Bearer ' + store.state.token\n    }\n    return config\n  },\n  error => {\n    console.log(error)\n    return Promise.reject(error)\n  }\n)\n\n// 响应拦截器\nservice.interceptors.response.use(\n  response => {\n    const res = response.data\n    if (res.code !== 200) {\n      Message({\n        message: res.message || '请求失败',\n        type: 'error',\n        duration: 5 * 1000\n      })\n      return Promise.reject(new Error(res.message || '请求失败'))\n    } else {\n      return res\n    }\n  },\n  error => {\n    if (error.response && error.response.status === 401) {\n      // 未授权，清除token并跳转到登录页\n      store.dispatch('logout')\n      location.reload()\n    }\n    Message({\n      message: error.message || '网络异常',\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\nexport default service"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","staticStyle","on","handleAdd","searchForm","model","value","entryId","callback","$$v","$set","expression","_l","journalEntryList","entry","key","id","formatJournalEntryText","handleSearch","resetSearch","directives","name","rawName","loading","postingList","scopedSlots","_u","fn","scope","_s","forEnText","row","$event","handleDelete","total","currentPage","pageSize","handleCurrentChange","handleSizeChange","dialogVisible","dialogTitle","ref","formData","rules","postingDate","postingUserId","handleSubmit","staticRenderFns","getPostingPage","params","request","url","method","savePosting","data","entityData","deletePosting","getJournalEntryList","pageNum","formRef","required","message","trigger","mounted","loadJournalEntries","loadData","methods","item","response","records","error","console","$message","voucherNo","voucherDate","summary","responseData","refreshData","resetForm","handleEdit","$confirm","confirmButtonText","cancelButtonText","type","then","success","catch","$refs","validate","valid","resetFields","formatDate","column","date","property","Date","toLocaleDateString","current","size","component","service","axios","create","timeout","interceptors","use","config","store","state","token","headers","log","Promise","reject","res","code","Message","duration","Error","status","dispatch","location","reload"],"ignoreList":[],"sourceRoot":""}