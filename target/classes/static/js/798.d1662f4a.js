"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[798],{798:function(e,r,t){t.r(r),t.d(r,{default:function(){return p}});var s=function(){var e=this,r=e._self._c;return r("div",{staticClass:"enterprise-init-container"},[r("el-card",{staticClass:"init-card"},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("企业信息初始化")])]),r("el-form",{ref:"enterpriseFormRef",attrs:{model:e.enterpriseForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"企业名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.enterpriseForm.name,callback:function(r){e.$set(e.enterpriseForm,"name",r)},expression:"enterpriseForm.name"}})],1),r("el-form-item",{attrs:{label:"注册资本",prop:"registrationCapital"}},[r("el-input",{attrs:{placeholder:"请输入注册资本（万元）"},scopedSlots:e._u([{key:"append",fn:function(){return[e._v("万元")]},proxy:!0}]),model:{value:e.enterpriseForm.registrationCapital,callback:function(r){e.$set(e.enterpriseForm,"registrationCapital",e._n(r))},expression:"enterpriseForm.registrationCapital"}})],1),r("el-form-item",{attrs:{label:"公司地址",prop:"address"}},[r("el-input",{attrs:{placeholder:"请输入公司地址"},model:{value:e.enterpriseForm.address,callback:function(r){e.$set(e.enterpriseForm,"address",r)},expression:"enterpriseForm.address"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.submitForm}},[e._v("提交保存")]),r("el-button",{attrs:{size:"large"},on:{click:e.handleReset}},[e._v("重置表单")])],1)],1)],1)],1)},a=[],i={name:"EnterpriseInit",data(){return{enterpriseForm:{name:"",registrationCapital:null,address:""},rules:{name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],registrationCapital:[{required:!0,message:"请输入注册资本",trigger:"blur"}],address:[{required:!0,message:"请输入公司地址",trigger:"change"}]}}},created(){this.loadEnterpriseInfo()},methods:{async loadEnterpriseInfo(){try{const e=t(7277).A,r=await e.get("/enterprise/info");200===r.code&&r.data&&(this.enterpriseForm=r.data)}catch(e){console.log("获取企业信息失败")}},async submitForm(){this.$refs.enterpriseFormRef.validate(async e=>{if(e)try{const e=t(7277).A,r=await e.post("/enterprise/init",this.enterpriseForm);200===r.code?(this.$store.dispatch("setEnterpriseInfo",this.enterpriseForm),this.$message.success("企业信息初始化成功")):this.$message.error(r.message||"企业信息初始化失败")}catch(r){this.$message.error("企业信息初始化失败")}})},handleReset(){this.$refs.enterpriseFormRef.resetFields()}}},n=i,o=t(1656),l=(0,o.A)(n,s,a,!1,null,"b24b348e",null),p=l.exports},7277:function(e,r,t){var s=t(4373),a=t(5129),i=t(9143);const n=s.A.create({timeout:5e3});n.interceptors.request.use(e=>(a.A.state.token&&(e.headers["Authorization"]="Bearer "+a.A.state.token),e),e=>(console.log(e),Promise.reject(e))),n.interceptors.response.use(e=>{const r=e.data;return 200!==r.code?((0,i.Message)({message:r.message||"请求失败",type:"error",duration:5e3}),Promise.reject(new Error(r.message||"请求失败"))):r},e=>(e.response&&401===e.response.status&&(a.A.dispatch("logout"),location.reload()),(0,i.Message)({message:e.message||"网络异常",type:"error",duration:5e3}),Promise.reject(e))),r.A=n}}]);
//# sourceMappingURL=798.d1662f4a.js.map