{"version":3,"file":"js/90.2d0bf1b2.js","mappings":"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","sources":["webpack://demo/./src/views/AccountingSubject.vue","webpack://demo/src/views/AccountingSubject.vue","webpack://demo/./src/views/AccountingSubject.vue?f478","webpack://demo/./src/views/AccountingSubject.vue?8cc8","webpack://demo/./src/api/request.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"accounting-subject-container\"},[_c('div',{staticClass:\"header\"},[_c('h2',[_vm._v(\"会计科目管理\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showAddDialog}},[_vm._v(\"新增科目\")])],1),_c('div',{staticClass:\"content\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"科目树\")])]),_c('el-tree',{ref:\"subjectTreeRef\",attrs:{\"data\":_vm.subjectTree,\"props\":_vm.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\"},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function({ node, data }){return [_c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(data.code)+\" - \"+_vm._s(data.name))]),(data.status === 1)?_c('span',[_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"success\"}},[_vm._v(\"启用\")])],1):_c('span',[_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"danger\"}},[_vm._v(\"禁用\")])],1)])]}}])})],1)],1),_c('el-col',{attrs:{\"span\":18}},[(_vm.selectedSubject)?_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.showEditDialog}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":_vm.deleteSubject}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.toggleEnable}},[_vm._v(\" \"+_vm._s(_vm.selectedSubject.status === 1 ? '禁用' : '启用')+\" \")])],1)]),_c('el-descriptions',{attrs:{\"column\":1,\"border\":\"\"}},[_c('el-descriptions-item',{attrs:{\"label\":\"科目编码\"}},[_vm._v(_vm._s(_vm.selectedSubject.code))]),_c('el-descriptions-item',{attrs:{\"label\":\"科目名称\"}},[_vm._v(_vm._s(_vm.selectedSubject.name))]),_c('el-descriptions-item',{attrs:{\"label\":\"科目类型\"}},[_vm._v(_vm._s(this.getTypeText(_vm.selectedSubject.type)))]),_c('el-descriptions-item',{attrs:{\"label\":\"余额方向\"}},[_vm._v(_vm._s(_vm.selectedSubject.balanceDirection === 1 ? '借' : '贷'))]),_c('el-descriptions-item',{attrs:{\"label\":\"状态\"}},[_vm._v(_vm._s(_vm.selectedSubject.status === 1 ? '启用' : '禁用'))])],1)],1):_c('el-empty',{attrs:{\"description\":\"请选择一个科目查看详情\"}})],1)],1)],1),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"subjectFormRef\",attrs:{\"model\":_vm.subjectForm,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"科目编码\",\"prop\":\"code\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入科目编码\"},model:{value:(_vm.subjectForm.code),callback:function ($$v) {_vm.$set(_vm.subjectForm, \"code\", $$v)},expression:\"subjectForm.code\"}})],1),_c('el-form-item',{attrs:{\"label\":\"科目名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入科目名称\"},model:{value:(_vm.subjectForm.name),callback:function ($$v) {_vm.$set(_vm.subjectForm, \"name\", $$v)},expression:\"subjectForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"科目类型\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择科目类型\"},model:{value:(_vm.subjectForm.type),callback:function ($$v) {_vm.$set(_vm.subjectForm, \"type\", $$v)},expression:\"subjectForm.type\"}},[_c('el-option',{attrs:{\"label\":\"资产\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"负债\",\"value\":2}}),_c('el-option',{attrs:{\"label\":\"共同\",\"value\":3}}),_c('el-option',{attrs:{\"label\":\"所有者权益\",\"value\":4}}),_c('el-option',{attrs:{\"label\":\"成本\",\"value\":5}}),_c('el-option',{attrs:{\"label\":\"损益\",\"value\":6}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"余额方向\",\"prop\":\"balanceDirection\"}},[_c('el-radio-group',{model:{value:(_vm.subjectForm.balanceDirection),callback:function ($$v) {_vm.$set(_vm.subjectForm, \"balanceDirection\", $$v)},expression:\"subjectForm.balanceDirection\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"借\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"贷\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"accounting-subject-container\">\n    <div class=\"header\">\n      <h2>会计科目管理</h2>\n      <el-button type=\"primary\" @click=\"showAddDialog\">新增科目</el-button>\n    </div>\n\n    <div class=\"content\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"6\">\n          <!-- 科目树 -->\n          <el-card>\n            <div slot=\"header\" class=\"clearfix\">\n              <span>科目树</span>\n            </div>\n            <el-tree\n              :data=\"subjectTree\"\n              :props=\"defaultProps\"\n              node-key=\"id\"\n              default-expand-all\n              @node-click=\"handleNodeClick\"\n              ref=\"subjectTreeRef\"\n            >\n              <template slot-scope=\"{ node, data }\">\n                <span class=\"custom-tree-node\">\n                  <span>{{ data.code }} - {{ data.name }}</span>\n                  <span v-if=\"data.status === 1\">\n                    <el-tag size=\"small\" type=\"success\">启用</el-tag>\n                  </span>\n                  <span v-else>\n                    <el-tag size=\"small\" type=\"danger\">禁用</el-tag>\n                  </span>\n                </span>\n              </template>\n            </el-tree>\n          </el-card>\n        </el-col>\n\n        <el-col :span=\"18\">\n          <!-- 科目详情 -->\n          <el-card v-if=\"selectedSubject\">\n            <div slot=\"header\" class=\"clearfix\">\n              <div>\n                <el-button type=\"primary\" size=\"small\" @click=\"showEditDialog\">编辑</el-button>\n                <el-button type=\"danger\" size=\"small\" @click=\"deleteSubject\">删除</el-button>\n                <el-button size=\"small\" @click=\"toggleEnable\">\n                  {{ selectedSubject.status === 1 ? '禁用' : '启用' }}\n                </el-button>\n              </div>\n            </div>\n\n            <el-descriptions :column=\"1\" border>\n              <el-descriptions-item label=\"科目编码\">{{ selectedSubject.code }}</el-descriptions-item>\n              <el-descriptions-item label=\"科目名称\">{{ selectedSubject.name }}</el-descriptions-item>\n              <el-descriptions-item label=\"科目类型\">{{ this.getTypeText(selectedSubject.type) }}</el-descriptions-item>\n              <el-descriptions-item label=\"余额方向\">{{ selectedSubject.balanceDirection === 1 ? '借' : '贷' }}</el-descriptions-item>\n              <el-descriptions-item label=\"状态\">{{ selectedSubject.status === 1 ? '启用' : '禁用' }}</el-descriptions-item>\n            </el-descriptions>\n          </el-card>\n\n          <el-empty v-else description=\"请选择一个科目查看详情\" />\n        </el-col>\n      </el-row>\n    </div>\n\n    <!-- 新增/编辑对话框 -->\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"50%\">\n      <el-form ref=\"subjectFormRef\" :model=\"subjectForm\" :rules=\"rules\" label-width=\"120px\">\n        <el-form-item label=\"科目编码\" prop=\"code\">\n          <el-input v-model=\"subjectForm.code\" placeholder=\"请输入科目编码\" />\n        </el-form-item>\n\n        <el-form-item label=\"科目名称\" prop=\"name\">\n          <el-input v-model=\"subjectForm.name\" placeholder=\"请输入科目名称\" />\n        </el-form-item>\n\n        <el-form-item label=\"科目类型\" prop=\"type\">\n          <el-select v-model=\"subjectForm.type\" placeholder=\"请选择科目类型\">\n            <el-option label=\"资产\" :value=\"1\" />\n            <el-option label=\"负债\" :value=\"2\" />\n            <el-option label=\"共同\" :value=\"3\" />\n            <el-option label=\"所有者权益\" :value=\"4\" />\n            <el-option label=\"成本\" :value=\"5\" />\n            <el-option label=\"损益\" :value=\"6\" />\n          </el-select>\n        </el-form-item>\n\n\n\n        <el-form-item label=\"余额方向\" prop=\"balanceDirection\">\n          <el-radio-group v-model=\"subjectForm.balanceDirection\">\n            <el-radio :label=\"1\">借</el-radio>\n            <el-radio :label=\"2\">贷</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/api/request\";\n\nexport default {\n  name: 'AccountingSubject',\n  data() {\n    return {\n      subjectTree: [],\n      selectedSubject: null,\n      dialogVisible: false,\n      isAddDialog: true,\n      dialogTitle: '新增科目',\n      subjectForm: {\n        code: '',\n        name: '',\n        type: '',\n        balanceDirection: '1',\n        parentId: 0,\n        status: 1\n      },\n      defaultProps: {\n        children: 'children',\n        label: (node) => `${node.code} - ${node.name}`\n      },\n      rules: {\n        code: [\n          { required: true, message: '请输入科目编码', trigger: 'blur' }\n        ],\n        name: [\n          { required: true, message: '请输入科目名称', trigger: 'blur' }\n        ],\n        type: [\n          { required: true, message: '请选择科目类型', trigger: 'change' }\n        ],\n        balanceDirection: [\n          { required: true, message: '请选择余额方向', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  computed: {\n    isAddDialog() {\n      return !this.subjectForm.id\n    }\n  },\n  created() {\n    this.loadSubjectTree()\n  },\n  methods: {\n    async loadSubjectTree() {\n      try {\n        const res = await request.get('/accounting-subject/tree')\n        if (res.code === 200) {\n          // 递归构建树形结构\n          this.buildTreeData(res.data)\n        }\n      } catch (error) {\n        this.$message.error('加载科目树失败')\n      }\n    },\n\n    buildTreeData(subjects) {\n      // 这里简化处理，实际应该递归构建完整的树形结构\n      this.subjectTree = subjects\n    },\n\n    getTypeText(type) {\n      const typeMap = {\n        1: '资产',\n        2: '负债',\n        3: '共同',\n        4: '所有者权益',\n        5: '成本',\n        6: '损益'\n      }\n      return typeMap[type] || type\n    },\n\n    handleNodeClick(data) {\n      this.selectedSubject = data\n    },\n\n    showAddDialog() {\n      this.dialogTitle = '新增科目'\n      this.resetForm()\n      this.dialogVisible = true\n    },\n\n    showEditDialog() {\n      this.dialogTitle = '编辑科目'\n      this.subjectForm = { ...this.selectedSubject }\n      this.dialogVisible = true\n    },\n\n    resetForm() {\n      this.subjectForm = {\n        code: '',\n        name: '',\n        type: '',\n        balanceDirection: '1',\n        parentId: 0,\n        status: 1\n      }\n      if (this.$refs.subjectFormRef) {\n        this.$refs.subjectFormRef.resetFields()\n      }\n    },\n\n    async submitForm() {\n      this.$refs.subjectFormRef.validate(async (valid) => {\n        if (valid) {\n          try {\n            let res\n\n            if (!this.subjectForm.id) {\n              res = await request.post('/accounting-subject/add', this.subjectForm)\n            } else {\n              res = await request.put('/accounting-subject/update', this.subjectForm)\n              this.selectedSubject = this.subjectForm\n            }\n\n            if (res.code === 200) {\n              this.$message.success(res.message || (this.isAddDialog ? '新增成功' : '更新成功'))\n              this.dialogVisible = false\n              this.loadSubjectTree()\n            } else {\n              this.$message.error(res.message || (this.isAddDialog ? '新增失败' : '更新失败'))\n            }\n          } catch (error) {\n            this.$message.error(this.isAddDialog ? '新增失败' : '更新失败')\n          }\n        }\n      })\n    },\n\n    async deleteSubject() {\n      this.$confirm('确定要删除这个科目吗？', '警告', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          const res = await request.delete(`/accounting-subject/delete/${this.selectedSubject.id}`)\n          if (res.code === 200) {\n            this.$message.success('删除成功')\n            this.loadSubjectTree()\n            this.selectedSubject = null\n          } else {\n            this.$message.error(res.message || '删除失败')\n          }\n        } catch (error) {\n          this.$message.error('删除失败')\n        }\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n    },\n    async toggleEnable() {\n      const status = this.selectedSubject.status === 1 ? 0 : 1;\n      try {\n        const res = await request.put(`/accounting-subject/enable/${this.selectedSubject.id}?enabled=${status}`)\n        if (res.code === 200) {\n          this.$message.success(status === 1 ? '启用成功' : '禁用成功')\n          this.selectedSubject.status = status\n        } else {\n          this.$message.error(res.message || '操作失败')\n        }\n      } catch (error) {\n        this.$message.error('操作失败')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.accounting-subject-container {\n  padding: 20px;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.header h2 {\n  margin: 0;\n  color: #303133;\n}\n\n.content {\n  margin-top: 20px;\n}\n\n.custom-tree-node {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AccountingSubject.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AccountingSubject.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AccountingSubject.vue?vue&type=template&id=e5f66ca0&scoped=true\"\nimport script from \"./AccountingSubject.vue?vue&type=script&lang=js\"\nexport * from \"./AccountingSubject.vue?vue&type=script&lang=js\"\nimport style0 from \"./AccountingSubject.vue?vue&type=style&index=0&id=e5f66ca0&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e5f66ca0\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\nimport store from '../store'\nimport { Message } from 'element-ui'\n\n// 创建axios实例\nconst service = axios.create({\n  timeout: 5000\n})\n\n// 请求拦截器\nservice.interceptors.request.use(\n  config => {\n    // 添加token\n    if (store.state.token) {\n      config.headers['Authorization'] = 'Bearer ' + store.state.token\n    }\n    return config\n  },\n  error => {\n    console.log(error)\n    return Promise.reject(error)\n  }\n)\n\n// 响应拦截器\nservice.interceptors.response.use(\n  response => {\n    const res = response.data\n    if (res.code !== 200) {\n      Message({\n        message: res.message || '请求失败',\n        type: 'error',\n        duration: 5 * 1000\n      })\n      return Promise.reject(new Error(res.message || '请求失败'))\n    } else {\n      return res\n    }\n  },\n  error => {\n    if (error.response && error.response.status === 401) {\n      // 未授权，清除token并跳转到登录页\n      store.dispatch('logout')\n      location.reload()\n    }\n    Message({\n      message: error.message || '网络异常',\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\nexport default service"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","showAddDialog","slot","ref","subjectTree","defaultProps","handleNodeClick","scopedSlots","_u","key","fn","node","data","_s","code","name","status","selectedSubject","showEditDialog","deleteSubject","toggleEnable","getTypeText","type","balanceDirection","dialogTitle","dialogVisible","$event","subjectForm","rules","model","value","callback","$$v","$set","expression","submitForm","staticRenderFns","isAddDialog","parentId","children","label","required","message","trigger","computed","id","created","loadSubjectTree","methods","res","request","get","buildTreeData","error","$message","subjects","typeMap","resetForm","$refs","subjectFormRef","resetFields","validate","valid","put","post","success","$confirm","confirmButtonText","cancelButtonText","then","delete","catch","info","component","service","axios","create","timeout","interceptors","use","config","store","state","token","headers","console","log","Promise","reject","response","Message","duration","Error","dispatch","location","reload"],"ignoreList":[],"sourceRoot":""}