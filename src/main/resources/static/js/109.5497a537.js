"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[109],{9109:function(t,a,e){e.r(a),e.d(a,{default:function(){return p}});var s=function(){var t=this,a=t._self._c;return a("el-card",{staticClass:"tax-handling-container"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("税务处理")])]),a("div",{staticClass:"search-container"},[a("el-form",{staticClass:"search-form",attrs:{inline:!0,model:t.searchForm}},[a("el-form-item",{attrs:{label:"税务类型："}},[a("el-select",{attrs:{placeholder:"请选择税务类型"},model:{value:t.searchForm.taxType,callback:function(a){t.$set(t.searchForm,"taxType",a)},expression:"searchForm.taxType"}},[a("el-option",{attrs:{label:"增值税",value:"vat"}}),a("el-option",{attrs:{label:"企业所得税",value:"income_tax"}}),a("el-option",{attrs:{label:"城市维护建设税",value:"urban_tax"}}),a("el-option",{attrs:{label:"教育费附加",value:"education_surcharge"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),a("el-button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.taxList}},[a("el-table-column",{attrs:{prop:"taxPeriod",label:"税务期间"}}),a("el-table-column",{attrs:{prop:"taxType",label:"税务类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getTaxTypeName(e.row.taxType)))])]}}])}),a("el-table-column",{attrs:{prop:"taxAmount",label:"应纳税额"}}),a("el-table-column",{attrs:{prop:"businessSourceInfo",label:"数据来源",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.businessSourceInfo?a("el-tag",{attrs:{type:"info",size:"small"}},[t._v(" "+t._s(e.row.businessSourceInfo)+" ")]):a("span",{staticStyle:{color:"#909399"}},[t._v("-")])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"处理状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getStatusType(e.row.status)}},[t._v(t._s(t.getStatusName(e.row.status)))])]}}])}),a("el-table-column",{attrs:{prop:"paymentDate",label:"缴款日期"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatDateTime(a.row.paymentDate))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(a){return t.handleView(e.row)}}},[t._v("查看")]),[0].includes(e.row.status)?a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){return t.handleDeclare(e.row)}}},[t._v("申报")]):t._e(),1===e.row.status?a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){return t.handlePay(e.row)}}},[t._v("缴款")]):t._e()]}}])})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.pageInfo.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{"modal-append-to-body":"",title:"查看税务处理详情",visible:t.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogVisible=a}}},[a("el-form",{attrs:{model:t.formData,"label-width":"120px",disabled:!0}},[a("el-form-item",{attrs:{label:"税务期间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"选择月份",disabled:""},model:{value:t.formData.taxPeriod,callback:function(a){t.$set(t.formData,"taxPeriod",a)},expression:"formData.taxPeriod"}})],1),a("el-form-item",{attrs:{label:"税务类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择税务类型",disabled:""},model:{value:t.formData.taxType,callback:function(a){t.$set(t.formData,"taxType",a)},expression:"formData.taxType"}},[a("el-option",{attrs:{label:"增值税",value:"vat"}}),a("el-option",{attrs:{label:"企业所得税",value:"income_tax"}}),a("el-option",{attrs:{label:"城市维护建设税",value:"urban_tax"}}),a("el-option",{attrs:{label:"教育费附加",value:"education_surcharge"}}),a("el-option",{attrs:{label:"个人所得税",value:"personal_income_tax"}})],1)],1),a("el-form-item",{attrs:{label:"应纳税额"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入应纳税额",disabled:""},model:{value:t.formData.taxAmount,callback:function(a){t.$set(t.formData,"taxAmount",t._n(a))},expression:"formData.taxAmount"}})],1),a("el-form-item",{attrs:{label:"数据来源"}},[t.formData.businessSourceInfo?a("el-tag",{attrs:{type:"info"}},[t._v(" "+t._s(t.formData.businessSourceInfo)+" ")]):a("span",{staticStyle:{color:"#909399"}},[t._v("-")])],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-tag",{attrs:{type:t.getStatusType(t.formData.status)}},[t._v(t._s(t.getStatusName(t.formData.status)))])],1),t.formData.paymentDate?a("el-form-item",{attrs:{label:"缴款日期"}},[a("span",[t._v(t._s(t.formatDateTime(t.formData.paymentDate)))])]):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},o=[],n=e(4373),r=e(412);const l={page:t=>(0,r.Ay)({url:"/tax-handling/page",method:"get",params:t}),getList:t=>n.A.get("/tax-handling/list",{params:t}),getById:t=>n.A.get(`/tax-handling/${t}`),save:t=>{const a={id:t.id,taxType:t.taxType,taxPeriod:t.taxPeriod,taxAmount:t.taxAmount,paymentDate:t.paymentDate,status:t.status};return t.id?n.A.put("/tax-handling",a):n.A.post("/tax-handling",a)},declare:t=>n.A.post(`/tax-handling/declare/${t}`),pay:t=>n.A.post(`/tax-handling/pay/${t}`),delete:t=>n.A.delete(`/tax-handling/${t}`),exportReport:t=>n.A.get("/tax-handling/export",{params:t,responseType:"blob"})};var i={name:"TaxHandling",data(){return{loading:!1,taxList:[],searchForm:{taxPeriod:"",taxType:"",status:""},pageInfo:{currentPage:1,pageSize:10,total:0},dialogVisible:!1,formData:{id:"",taxType:"",taxPeriod:"",taxAmount:0,paymentDate:"",status:0,businessSourceInfo:""}}},created(){this.loadData()},methods:{formatDateTime(t){if(!t)return"-";const a=new Date(t),e=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),n=String(a.getHours()).padStart(2,"0"),r=String(a.getMinutes()).padStart(2,"0"),l=String(a.getSeconds()).padStart(2,"0");return`${e}-${s}-${o} ${n}:${r}:${l}`},async loadData(){this.loading=!0;try{const t={pageNum:this.pageInfo.currentPage,pageSize:this.pageInfo.pageSize,...this.searchForm},a=await l.page(t),e=a.data||{},s=e.records||e.data?.records||[];this.taxList=s,this.pageInfo.total=e.total||e.data?.total||0}catch(t){this.$message.error("获取税务处理列表失败: "+(t.response?.data?.message||t.message))}finally{this.loading=!1}},handleSearch(){this.pageInfo.currentPage=1,this.loadData()},handleReset(){this.searchForm={taxPeriod:"",taxType:"",status:""},this.pageInfo.currentPage=1,this.loadData()},handleSizeChange(t){this.pageInfo.pageSize=t,this.loadData()},handleCurrentChange(t){this.pageInfo.currentPage=t,this.loadData()},async handleView(t){try{const a=await l.getById(t.id),e=a.data?.data||a.data||{};this.formData={id:e.id||"",taxType:e.taxType||"",taxPeriod:e.taxPeriod||"",taxAmount:e.taxAmount||0,paymentDate:e.paymentDate||"",status:void 0!==e.status?e.status:0,businessSourceInfo:e.businessSourceInfo||""},this.dialogVisible=!0}catch(a){this.$message.error("获取税务处理详情失败: "+(a.response?.data?.message||a.message))}},async handleDeclare(t){this.$confirm("确定要申报该税务处理记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await l.declare(t.id),this.$message.success("申报成功"),this.loadData()}catch(a){this.$message.error("申报失败: "+(a.response?.data?.message||a.message))}}).catch(()=>{this.$message.info("已取消操作")})},async handlePay(t){this.$confirm("确定要缴纳该税款吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await l.pay(t.id),this.$message.success("缴款成功"),this.loadData()}catch(a){this.$message.error("缴款失败: "+(a.response?.data?.message||a.message))}}).catch(()=>{this.$message.info("已取消操作")})},getTaxTypeName(t){const a={vat:"增值税",income_tax:"企业所得税",urban_tax:"城市维护建设税",education_surcharge:"教育费附加"};return a[t]||t},getStatusName(t){const a={0:"待申报",1:"已申报",2:"已缴纳"};return a[t]||"未知"},getStatusType(t){const a={0:"danger",1:"warning",2:"info",3:"success"};return a[t]||"default"}}},c=i,u=e(1656),d=(0,u.A)(c,s,o,!1,null,"87664de8",null),p=d.exports}}]);
//# sourceMappingURL=109.5497a537.js.map