"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[879],{879:function(e,s,r){r.r(s),r.d(s,{default:function(){return u}});var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login-container"},[s("div",{staticClass:"login-form"},[s("h2",{staticClass:"title"},[e._v("记账平台登录")]),s("el-form",{ref:"loginFormRef",attrs:{model:e.loginForm,rules:e.rules}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"用户名"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("i",{staticClass:"el-icon-user"})]},proxy:!0}]),model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码","show-password":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("i",{staticClass:"el-icon-lock"})]},proxy:!0}]),model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}})],1),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("登录")])],1)],1)],1)])},o=[],a=(r(4114),{name:"Login",data(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{handleLogin(){this.$refs.loginFormRef.validate(async e=>{if(e)try{const e=r(7277).A,s=await e.post("/login",this.loginForm);200===s.code&&(this.$store.dispatch("login",{user:s.data.user,token:s.data.token}),this.$message.success("登录成功"),this.$router.push("/home/enterprise-init"))}catch(s){this.$message.error("登录失败，请检查用户名和密码")}})}}}),n=a,i=r(1656),l=(0,i.A)(n,t,o,!1,null,"fa151132",null),u=l.exports},7277:function(e,s,r){var t=r(4373),o=r(5129),a=r(9143);const n=t.A.create({timeout:5e3});n.interceptors.request.use(e=>(o.A.state.token&&(e.headers["Authorization"]="Bearer "+o.A.state.token),e),e=>(console.log(e),Promise.reject(e))),n.interceptors.response.use(e=>{const s=e.data;return 200!==s.code?((0,a.Message)({message:s.message||"请求失败",type:"error",duration:5e3}),Promise.reject(new Error(s.message||"请求失败"))):s},e=>(e.response&&401===e.response.status&&(o.A.dispatch("logout"),location.reload()),(0,a.Message)({message:e.message||"网络异常",type:"error",duration:5e3}),Promise.reject(e))),s.A=n}}]);
//# sourceMappingURL=879.3d6abc52.js.map