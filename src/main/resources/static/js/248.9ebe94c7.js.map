{"version":3,"file":"js/248.9ebe94c7.js","mappings":"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","sources":["webpack://demo/./src/views/JournalEntry.vue","webpack://demo/src/views/JournalEntry.vue","webpack://demo/./src/views/JournalEntry.vue?3603","webpack://demo/./src/views/JournalEntry.vue?1efa","webpack://demo/./src/api/request.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"journal-entry-container\"},[_vm._m(0),_c('div',{staticClass:\"content\"},[_c('el-card',[_c('el-form',{staticClass:\"search-form\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"凭证编号\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入凭证编号\"},model:{value:(_vm.searchForm.voucherNo),callback:function ($$v) {_vm.$set(_vm.searchForm, \"voucherNo\", $$v)},expression:\"searchForm.voucherNo\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_c('el-button',{on:{\"click\":_vm.resetSearch}},[_vm._v(\"重置\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.entryList}},[_c('el-table-column',{attrs:{\"prop\":\"voucherNo\",\"label\":\"凭证编号\"}}),_c('el-table-column',{attrs:{\"prop\":\"voucherDate\",\"label\":\"凭证日期\"}}),_c('el-table-column',{attrs:{\"prop\":\"summary\",\"label\":\"摘要\"}}),_c('el-table-column',{attrs:{\"prop\":\"totalDebit\",\"label\":\"借方总额\"}}),_c('el-table-column',{attrs:{\"prop\":\"totalCredit\",\"label\":\"贷方总额\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"formatter\":_vm.formatStatus}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.viewDetail(scope.row)}}},[_vm._v(\"查看\")]),(scope.row.status === 0)?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.handlePost(scope.row)}}},[_vm._v(\"过账\")]):_vm._e(),(scope.row.status === 1)?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.handleCancelPost(scope.row)}}},[_vm._v(\"取消过账\")]):_vm._e(),(scope.row.status === 0 && !scope.row.businessId)?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.cancelEntry(scope.row)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"total\":_vm.total,\"page-sizes\":[10, 20, 50, 100],\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}})],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"凭证详情\",\"visible\":_vm.detailVisible,\"width\":\"80%\"},on:{\"update:visible\":function($event){_vm.detailVisible=$event}}},[_c('el-descriptions',{attrs:{\"column\":1,\"border\":\"\"}},[_c('el-descriptions-item',{attrs:{\"label\":\"凭证编号\"}},[_vm._v(_vm._s(_vm.selectedEntry.voucherNo))]),_c('el-descriptions-item',{attrs:{\"label\":\"凭证日期\"}},[_vm._v(_vm._s(_vm.selectedEntry.voucherDate))]),_c('el-descriptions-item',{attrs:{\"label\":\"摘要\"}},[_vm._v(_vm._s(_vm.selectedEntry.summary))]),_c('el-descriptions-item',{attrs:{\"label\":\"状态\"}},[_vm._v(_vm._s(_vm.formatStatusText(_vm.selectedEntry.status)))])],1),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.selectedEntryDetails,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"subjectCode\",\"label\":\"科目编码\"}}),_c('el-table-column',{attrs:{\"prop\":\"subjectName\",\"label\":\"科目名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"备注\"}}),_c('el-table-column',{attrs:{\"prop\":\"debitAmount\",\"label\":\"借方金额\"}}),_c('el-table-column',{attrs:{\"prop\":\"creditAmount\",\"label\":\"贷方金额\"}})],1),_c('div',{staticClass:\"total-section\",staticStyle:{\"margin-top\":\"10px\"}},[_c('div',{staticClass:\"total-item\"},[_c('span',[_vm._v(\"合计：\")]),_c('span',[_vm._v(\"借方金额：\"+_vm._s(_vm.selectedEntry.totalDebit))]),_c('span',[_vm._v(\"贷方金额：\"+_vm._s(_vm.selectedEntry.totalCredit))])])]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.detailVisible = false}}},[_vm._v(\"关闭\")])],1)],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header\"},[_c('h2',[_vm._v(\"记账凭证\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"journal-entry-container\">\n    <div class=\"header\">\n      <h2>记账凭证</h2>\n    </div>\n\n    <div class=\"content\">\n      <el-card>\n        <el-form :inline=\"true\" :model=\"searchForm\" class=\"search-form\">\n          <el-form-item label=\"凭证编号\">\n            <el-input v-model=\"searchForm.voucherNo\" placeholder=\"请输入凭证编号\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"search\">查询</el-button>\n            <el-button @click=\"resetSearch\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-table :data=\"entryList\" style=\"width: 100%\">\n          <el-table-column prop=\"voucherNo\" label=\"凭证编号\" />\n          <el-table-column prop=\"voucherDate\" label=\"凭证日期\" />\n          <el-table-column prop=\"summary\" label=\"摘要\" />\n          <el-table-column prop=\"totalDebit\" label=\"借方总额\" />\n          <el-table-column prop=\"totalCredit\" label=\"贷方总额\" />\n          <el-table-column prop=\"status\" label=\"状态\" :formatter=\"formatStatus\" />\n          <el-table-column label=\"操作\" width=\"200\">\n            <template slot-scope=\"scope\">\n              <el-button size=\"small\" type=\"primary\" @click=\"viewDetail(scope.row)\">查看</el-button>\n              <el-button size=\"small\" type=\"success\" @click=\"handlePost(scope.row)\" v-if=\"scope.row.status === 0\">过账</el-button>\n              <el-button size=\"small\" type=\"warning\" @click=\"handleCancelPost(scope.row)\" v-if=\"scope.row.status === 1\">取消过账</el-button>\n              <el-button size=\"small\" type=\"danger\" @click=\"cancelEntry(scope.row)\" v-if=\"scope.row.status === 0 && !scope.row.businessId\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <div class=\"pagination\">\n          <el-pagination\n            :current-page=\"currentPage\"\n            :page-size=\"pageSize\"\n            :total=\"total\"\n            :page-sizes=\"[10, 20, 50, 100]\"\n            layout=\"total, sizes, prev, pager, next, jumper\"\n            @current-change=\"handleCurrentChange\"\n            @size-change=\"handleSizeChange\"\n          />\n        </div>\n      </el-card>\n    </div>\n\n    <!-- 已移除：新增/编辑凭证对话框（凭证只能通过业务单据自动生成） -->\n\n    <!-- 查看详情对话框 -->\n    <el-dialog title=\"凭证详情\" :visible.sync=\"detailVisible\" width=\"80%\">\n      <el-descriptions :column=\"1\" border>\n        <el-descriptions-item label=\"凭证编号\">{{ selectedEntry.voucherNo }}</el-descriptions-item>\n        <el-descriptions-item label=\"凭证日期\">{{ selectedEntry.voucherDate }}</el-descriptions-item>\n        <el-descriptions-item label=\"摘要\">{{ selectedEntry.summary }}</el-descriptions-item>\n        <el-descriptions-item label=\"状态\">{{ formatStatusText(selectedEntry.status) }}</el-descriptions-item>\n      </el-descriptions>\n\n      <el-table :data=\"selectedEntryDetails\" style=\"width: 100%; margin-top: 20px\" border>\n        <el-table-column prop=\"subjectCode\" label=\"科目编码\" />\n        <el-table-column prop=\"subjectName\" label=\"科目名称\" />\n        <el-table-column prop=\"remark\" label=\"备注\" />\n        <el-table-column prop=\"debitAmount\" label=\"借方金额\" />\n        <el-table-column prop=\"creditAmount\" label=\"贷方金额\" />\n      </el-table>\n\n      <div class=\"total-section\" style=\"margin-top: 10px\">\n        <div class=\"total-item\">\n          <span>合计：</span>\n          <span>借方金额：{{ selectedEntry.totalDebit }}</span>\n          <span>贷方金额：{{ selectedEntry.totalCredit }}</span>\n        </div>\n      </div>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"detailVisible = false\">关闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/api/request\";\n\nexport default {\n  name: 'JournalEntry',\n  data() {\n    return {\n      entryList: [],\n      searchForm: {\n        voucherNo: '',\n        dateRange: []\n      },\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      detailVisible: false,\n      selectedEntry: {},\n      selectedEntryDetails: []\n    }\n  },\n  created() {\n    this.loadData();\n  },\n  methods: {\n    async loadData() {\n      try {\n        const res = await request.get('/journal-entry/page', {\n          params: {\n            pageNum: this.currentPage,\n            pageSize: this.pageSize,\n            voucherNo: this.searchForm.voucherNo,\n          }\n        });\n        if (res.code === 200) {\n          this.entryList = res.data.records;\n          this.total = res.data.total;\n        }\n      } catch (error) {\n        this.$message.error('加载失败');\n      }\n    },\n\n    // 已移除：加载科目列表（不再需要手动选择科目）\n\n    search() {\n      this.currentPage = 1;\n      this.loadData();\n    },\n\n    resetSearch() {\n      this.searchForm = {\n        voucherNo: '',\n        dateRange: []\n      };\n      this.search();\n    },\n\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.loadData();\n    },\n\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n      this.loadData();\n    },\n\n    // 已移除：新增凭证功能\n    // 已移除：编辑凭证功能\n\n    // 已移除：加载凭证明细（在viewDetail中已包含）\n\n    // 已移除：表单相关方法（不再需要手动创建凭证）\n\n    // 已移除：提交表单功能（凭证只能通过业务单据自动生成）\n\n    async viewDetail(row) {\n      try {\n        const [entryRes, detailsRes] = await Promise.all([\n          request.get(`/journal-entry/${row.id}`),\n          request.get(`/journal-entry/detail/${row.id}`)\n        ]);\n\n        if (entryRes.code === 200 && detailsRes.code === 200) {\n          this.selectedEntry = entryRes.data;\n          this.selectedEntryDetails = detailsRes.data;\n          this.detailVisible = true;\n        }\n      } catch (error) {\n        this.$message.error('加载详情失败');\n      }\n    },\n\n    async cancelEntry(row) {\n      this.$confirm('确定要删除该凭证吗？只能删除草稿状态且未关联业务的凭证', '警告', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          const res = await request.delete(`/journal-entry/${row.id}`);\n          if (res.code === 200) {\n            this.$message.success('删除成功');\n            this.loadData();\n          } else {\n            this.$message.error(res.message || '删除失败');\n          }\n        } catch (error) {\n          const errorMsg = error.response?.data?.message || error.message || '删除失败';\n          this.$message.error(errorMsg);\n        }\n      }).catch(() => {\n        this.$message.info('已取消操作');\n      });\n    },\n\n    formatStatus(row) {\n      const statusMap = {\n        0: '未过账',\n        1: '已过账'\n      };\n      return statusMap[row.status] || row.status;\n    },\n\n    formatStatusText(status) {\n      const statusMap = {\n        0: '未过账',\n        1: '已过账'\n      };\n      return statusMap[status] || status;\n    },\n    \n    // 过账操作\n    async handlePost(row) {\n      this.$confirm('确定要对该凭证进行过账操作吗？过账后将无法修改凭证', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          // 获取当前登录用户ID，这里暂时使用1，实际应该从登录信息获取\n          const userId = this.$store.state.user?.id || 1;\n          const res = await request.post(`/posting/${row.id}?userId=${userId}`);\n          if (res.code === 200) {\n            this.$message.success('过账成功');\n            this.loadData();\n          } else {\n            this.$message.error(res.message || '过账失败');\n          }\n        } catch (error) {\n          this.$message.error('过账失败：' + (error.response?.data?.message || error.message));\n        }\n      }).catch(() => {\n        this.$message.info('已取消操作');\n      });\n    },\n    \n    // 取消过账\n    async handleCancelPost(row) {\n      this.$confirm('确定要取消该凭证的过账吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          const res = await request.delete(`/posting/${row.id}`);\n          if (res.code === 200) {\n            this.$message.success('取消过账成功');\n            this.loadData();\n          } else {\n            this.$message.error(res.message || '取消过账失败');\n          }\n        } catch (error) {\n          this.$message.error('取消过账失败：' + (error.response?.data?.message || error.message));\n        }\n      }).catch(() => {\n        this.$message.info('已取消操作');\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.journal-entry-container {\n  padding: 0;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n  padding: 20px 24px;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);\n}\n\n.header h2 {\n  margin: 0;\n  font-size: 24px;\n  font-weight: 600;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.content .el-card {\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n}\n\n.search-form {\n  margin-bottom: 24px;\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n}\n\n.pagination {\n  margin-top: 24px;\n  text-align: right;\n  padding: 16px 0;\n}\n\n.add-detail-btn {\n  margin: 16px 0;\n  text-align: right;\n}\n\n.total-section {\n  margin-top: 24px;\n  padding: 16px;\n  text-align: right;\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n  border-radius: 12px;\n}\n\n.total-item {\n  font-weight: 600;\n  color: #2c3e50;\n}\n\n.total-item span {\n  margin-left: 20px;\n}\n\n.error-text {\n  color: #f56c6c;\n}\n\n.el-table {\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.el-table th {\n  background: #f5f7fa;\n  color: #2c3e50;\n  font-weight: 600;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JournalEntry.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JournalEntry.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./JournalEntry.vue?vue&type=template&id=2c1e8e08&scoped=true\"\nimport script from \"./JournalEntry.vue?vue&type=script&lang=js\"\nexport * from \"./JournalEntry.vue?vue&type=script&lang=js\"\nimport style0 from \"./JournalEntry.vue?vue&type=style&index=0&id=2c1e8e08&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c1e8e08\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\nimport store from '../store'\nimport { Message } from 'element-ui'\n\n// 创建axios实例\nconst service = axios.create({\n  timeout: 5000\n})\n\n// 请求拦截器\nservice.interceptors.request.use(\n  config => {\n    // 添加token\n    if (store.state.token) {\n      config.headers['Authorization'] = 'Bearer ' + store.state.token\n    }\n    return config\n  },\n  error => {\n    console.log(error)\n    return Promise.reject(error)\n  }\n)\n\n// 响应拦截器\nservice.interceptors.response.use(\n  response => {\n    const res = response.data\n    if (res.code !== 200) {\n      Message({\n        message: res.message || '请求失败',\n        type: 'error',\n        duration: 5 * 1000\n      })\n      return Promise.reject(new Error(res.message || '请求失败'))\n    } else {\n      return res\n    }\n  },\n  error => {\n    if (error.response && error.response.status === 401) {\n      // 未授权，清除token并跳转到登录页\n      store.dispatch('logout')\n      location.reload()\n    }\n    Message({\n      message: error.message || '网络异常',\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\nexport default service"],"names":["render","_vm","this","_c","_self","staticClass","_m","attrs","searchForm","model","value","voucherNo","callback","$$v","$set","expression","on","search","_v","resetSearch","staticStyle","entryList","formatStatus","scopedSlots","_u","key","fn","scope","$event","viewDetail","row","status","handlePost","_e","handleCancelPost","businessId","cancelEntry","currentPage","pageSize","total","handleCurrentChange","handleSizeChange","detailVisible","_s","selectedEntry","voucherDate","summary","formatStatusText","selectedEntryDetails","totalDebit","totalCredit","slot","staticRenderFns","name","data","dateRange","created","loadData","methods","res","request","get","params","pageNum","code","records","error","$message","val","entryRes","detailsRes","Promise","all","id","$confirm","confirmButtonText","cancelButtonText","type","then","delete","success","message","errorMsg","response","catch","info","statusMap","userId","$store","state","user","post","component","service","axios","create","timeout","interceptors","use","config","store","token","headers","console","log","reject","Message","duration","Error","dispatch","location","reload"],"ignoreList":[],"sourceRoot":""}