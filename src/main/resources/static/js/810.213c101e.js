"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[810],{8810:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"employee-container"},[t("el-card",{attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("员工管理")]),t("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新增员工")])],1),t("el-form",{staticClass:"query-form",attrs:{inline:!0,model:e.queryForm}},[t("el-form-item",{attrs:{label:"员工编码"}},[t("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入员工编码"},model:{value:e.queryForm.employeeCode,callback:function(t){e.$set(e.queryForm,"employeeCode",t)},expression:"queryForm.employeeCode"}})],1),t("el-form-item",{attrs:{label:"员工姓名"}},[t("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入员工姓名"},model:{value:e.queryForm.employeeName,callback:function(t){e.$set(e.queryForm,"employeeName",t)},expression:"queryForm.employeeName"}})],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择状态"},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"启用",value:1}}),t("el-option",{attrs:{label:"禁用",value:0}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")]),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.handleReset}},[e._v("重置")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.pageData},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"employeeCode",label:"员工编码"}}),t("el-table-column",{attrs:{prop:"employeeName",label:"员工姓名"}}),t("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t("el-table-column",{attrs:{prop:"department",label:"部门"}}),t("el-table-column",{attrs:{prop:"baseSalary",label:"员工薪资"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatMoney(t.row.baseSalary))+" ")]}}])}),t("el-table-column",{attrs:{prop:"hireDate",label:"入职日期"}}),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.status?t("el-tag",{attrs:{type:"success"}},[e._v("启用")]):t("el-tag",{attrs:{type:"danger"}},[e._v("禁用")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleDelete(a.row.id)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, ->, total",total:e.total,"current-page":e.queryForm.pageNum,"page-size":e.queryForm.pageSize},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"员工编码",prop:"employeeCode"}},[t("el-input",{attrs:{disabled:!e.isAdd,placeholder:"自动生成"},model:{value:e.form.employeeCode,callback:function(t){e.$set(e.form,"employeeCode",t)},expression:"form.employeeCode"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"员工姓名",prop:"employeeName"}},[t("el-input",{attrs:{placeholder:"请输入员工姓名"},model:{value:e.form.employeeName,callback:function(t){e.$set(e.form,"employeeName",t)},expression:"form.employeeName"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"部门",prop:"department"}},[t("el-input",{attrs:{placeholder:"请输入部门"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"员工薪资",prop:"baseSalary"}},[t("el-input",{attrs:{placeholder:"请输入员工薪资"},model:{value:e.form.baseSalary,callback:function(t){e.$set(e.form,"baseSalary",e._n(t))},expression:"form.baseSalary"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"入职日期",prop:"hireDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择入职日期","value-format":"yyyy-MM-dd"},model:{value:e.form.hireDate,callback:function(t){e.$set(e.form,"hireDate",t)},expression:"form.hireDate"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确定")])],1)],1)],1)},l=[];a(8111),a(1701),a(3110),a(8335);function o(){return localStorage.getItem("companyId")}var r=a(412),i={name:"Employee",data(){return{loading:!1,pageData:[],total:0,selectedIds:[],dialogVisible:!1,isAdd:!0,dialogTitle:"新增员工",queryForm:{pageNum:1,pageSize:10,employeeCode:"",employeeName:"",department:"",status:""},form:{id:"",companyId:"",employeeCode:"",employeeName:"",phone:"",department:"",baseSalary:null,hireDate:"",status:1},rules:{employeeName:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],baseSalary:[{required:!0,message:"请输入员工薪资",trigger:"blur"}]}}},created(){this.loadData()},methods:{loadData(){this.loading=!0,this.queryForm.companyId=o(),r.JL.page(this.queryForm).then(e=>{this.loading=!1,200===e.code?(this.pageData=e.data.records,this.total=e.data.total):this.$message.error(e.msg)}).catch(()=>{this.loading=!1})},handleQuery(){this.queryForm.pageNum=1,this.loadData()},handleReset(){this.queryForm={pageNum:1,pageSize:10,employeeCode:"",employeeName:"",status:""},this.loadData()},handleCurrentChange(e){this.queryForm.pageNum=e,this.loadData()},handleSizeChange(e){this.queryForm.pageSize=e,this.loadData()},handleSelectionChange(e){this.selectedIds=e.map(e=>e.id)},handleAdd(){this.isAdd=!0,this.dialogTitle="新增员工",this.resetForm(),this.form.companyId=o(),r.JL.generateCode({companyId:1}).then(e=>{200===e.code&&(this.form.employeeCode=e.data)}),this.dialogVisible=!0},handleEdit(e){this.isAdd=!1,this.dialogTitle="编辑员工",this.resetForm(),this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},resetForm(){this.form={id:"",companyId:"",employeeCode:"",employeeName:"",phone:"",department:"",baseSalary:null,hireDate:"",status:1},this.$refs.form&&this.$refs.form.resetFields()},formatMoney(e){return null===e||void 0===e?"0.00":Number(e).toFixed(2)},handleSubmit(){this.$refs.form.validate(e=>{if(e){const e={...this.form,status:Number(this.form.status)};this.isAdd?r.JL.add(e).then(e=>{200===e.code?(this.$message.success("新增成功"),this.dialogVisible=!1,this.loadData()):this.$message.error(e.msg)}):r.JL.update(e).then(e=>{200===e.code?(this.$message.success("修改成功"),this.dialogVisible=!1,this.loadData()):this.$message.error(e.msg)})}})},handleDelete(e){this.$confirm("确定要删除这条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r.JL.delete(e).then(e=>{200===e.code?(this.$message.success("删除成功"),this.loadData()):this.$message.error(e.msg)})})},handleBatchDelete(){0!==this.selectedIds.length?this.$confirm("确定要删除选中的数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r.JL.deleteBatch(this.selectedIds).then(e=>{200===e.code?(this.$message.success("批量删除成功"),this.selectedIds=[],this.loadData()):this.$message.error(e.msg)})}):this.$message.warning("请选择要删除的数据")},handleEnableBatch(){0!==this.selectedIds.length?r.JL.enableBatch(this.selectedIds).then(e=>{200===e.code?(this.$message.success("批量启用成功"),this.selectedIds=[],this.loadData()):this.$message.error(e.msg)}):this.$message.warning("请选择要启用的数据")},handleDisableBatch(){0!==this.selectedIds.length?r.JL.disableBatch(this.selectedIds).then(e=>{200===e.code?(this.$message.success("批量禁用成功"),this.selectedIds=[],this.loadData()):this.$message.error(e.msg)}):this.$message.warning("请选择要禁用的数据")},checkName(){this.form.employeeName&&r.JL.checkName({employeeName:this.form.employeeName,companyId:o(),id:this.isAdd?null:this.form.id}).then(e=>{200!==e.code||e.data||(this.$message.error("员工名称已存在"),this.form.employeeName="")})},checkIdCard(){this.form.idCard&&r.JL.checkIdCard({idCard:this.form.idCard,companyId:o(),id:this.isAdd?null:this.form.id}).then(e=>{200!==e.code||e.data||(this.$message.error("身份证号已存在"),this.form.idCard="")})},checkPhone(){this.form.phone&&r.JL.checkPhone({phone:this.form.phone,companyId:o(),id:this.isAdd?null:this.form.id}).then(e=>{200!==e.code||e.data||(this.$message.error("手机号已存在"),this.form.phone="")})}}},n=i,d=a(1656),m=(0,d.A)(n,s,l,!1,null,"6386be2a",null),h=m.exports}}]);
//# sourceMappingURL=810.213c101e.js.map