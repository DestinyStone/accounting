"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[324],{6324:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"financial-report-container"},[e("div",{staticClass:"report-header"},[e("h2",[t._v("会计报表")]),e("div",{staticClass:"report-controls"},[e("el-radio-group",{on:{change:t.handleReportChange},model:{value:t.activeReport,callback:function(e){t.activeReport=e},expression:"activeReport"}},[e("el-radio-button",{attrs:{label:"balanceSheet"}},[t._v("资产负债表")]),e("el-radio-button",{attrs:{label:"incomeStatement"}},[t._v("利润表")]),e("el-radio-button",{attrs:{label:"cashFlowStatement"}},[t._v("现金流量表")])],1),e("div",{staticClass:"period-control"},[e("el-select",{attrs:{placeholder:"选择报表期间"},on:{change:t.handlePeriodChange},model:{value:t.selectedPeriod,callback:function(e){t.selectedPeriod=e},expression:"selectedPeriod"}},t._l(t.periodOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),e("el-button",{attrs:{type:"primary"},on:{click:t.exportReport}},[t._v("导出报表")])],1)],1)]),t.loading?e("el-loading",{attrs:{fullscreen:"",text:"正在加载报表数据..."}}):t._e(),"balanceSheet"===t.activeReport&&t.balanceSheetData?e("div",{staticClass:"report-content"},[e("div",{staticClass:"report-title"},[e("h3",[t._v("资产负债表")]),e("span",{staticClass:"report-date"},[t._v(t._s(t.formatPeriod(t.selectedPeriod)))])]),e("div",{staticClass:"balance-sheet-layout"},[e("div",{staticClass:"balance-sheet-section"},[e("h4",[t._v("资产")]),e("el-table",{attrs:{data:t.getAssetsData(),stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"项目",width:"300","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"金额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.amount))+" ")]}}],null,!1,1693487316)})],1)],1),e("div",{staticClass:"balance-sheet-section"},[e("h4",[t._v("负债和所有者权益")]),e("el-table",{attrs:{data:t.getLiabilitiesAndEquityData(),stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"项目",width:"300","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"金额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.amount))+" ")]}}],null,!1,1693487316)})],1)],1)])]):t._e(),"incomeStatement"===t.activeReport&&t.incomeStatementData?e("div",{staticClass:"report-content"},[e("div",{staticClass:"report-title"},[e("h3",[t._v("利润表")]),e("span",{staticClass:"report-date"},[t._v(t._s(t.formatPeriod(t.selectedPeriod)))])]),e("el-table",{attrs:{data:t.getIncomeStatementData(),stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"项目",width:"300","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"金额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.amount))+" ")]}}],null,!1,1693487316)})],1)],1):t._e(),"cashFlowStatement"===t.activeReport&&t.cashFlowStatementData?e("div",{staticClass:"report-content"},[e("div",{staticClass:"report-title"},[e("h3",[t._v("现金流量表")]),e("span",{staticClass:"report-date"},[t._v(t._s(t.formatPeriod(t.selectedPeriod)))])]),e("div",{staticClass:"cash-flow-layout"},[e("div",{staticClass:"cash-flow-section"},[e("h4",[t._v("经营活动产生的现金流量")]),e("el-table",{attrs:{data:t.cashFlowStatementData.operatingActivities,stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"项目",width:"350","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"金额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.amount))+" ")]}}],null,!1,1693487316)})],1)],1),e("div",{staticClass:"cash-flow-section"},[e("h4",[t._v("投资活动产生的现金流量")]),e("el-table",{attrs:{data:t.cashFlowStatementData.investingActivities,stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"项目",width:"350","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"金额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.amount))+" ")]}}],null,!1,1693487316)})],1)],1),e("div",{staticClass:"cash-flow-section"},[e("h4",[t._v("筹资活动产生的现金流量")]),e("el-table",{attrs:{data:t.cashFlowStatementData.financingActivities,stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"项目",width:"350","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"金额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.amount))+" ")]}}],null,!1,1693487316)})],1)],1),e("div",{staticClass:"cash-flow-section"},[e("h4",[t._v("现金及现金等价物净增加额")]),e("el-table",{attrs:{data:t.getCashFlowSummaryData(),stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"项目",width:"350","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"amount",label:"金额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.amount))+" ")]}}],null,!1,1693487316)})],1)],1)])]):t._e()],1)},o=[],l=(a(4114),a(4603),a(7566),a(8721),a(412)),n={name:"FinancialReport",data(){return{activeReport:"balanceSheet",selectedPeriod:"2025-10",periodOptions:[],loading:!1,balanceSheetData:null,incomeStatementData:null,cashFlowStatementData:null,useMockData:!1}},created(){this.loadPeriodOptions()},mounted(){this.loadReportData()},methods:{handleReportChange(){this.loadReportData()},handlePeriodChange(){this.loadReportData()},loadPeriodOptions(){const t=[],e=new Date;for(let a=0;a<12;a++){const s=new Date(e.getFullYear(),e.getMonth()-a,1),o=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),n=`${o}-${l}`,i=`${o}年${l}月`;t.push({value:n,label:i})}this.periodOptions=t},loadReportData(){this.loading=!0,this.useMockData?setTimeout(()=>{this.loadMockData(),this.loading=!1},500):this.loadApiData()},loadMockData(){console.log("模拟数据加载功能已禁用")},loadApiData(){let t,e,a,s;if("balanceSheet"===this.activeReport)t=this.selectedPeriod;else if(this.selectedPeriod.includes("-")&&2===this.selectedPeriod.split("-").length){const[t,s]=this.selectedPeriod.split("-");e=`${t}-${s}-01`;const o=new Date(t,s,0).getDate();a=`${t}-${s}-${o}`}else{const t=new Date,s=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0");e=`${s}-${o}-01`;const l=new Date(s,t.getMonth()+1,0).getDate();a=`${s}-${o}-${l}`}switch(this.activeReport){case"balanceSheet":s=l.aT.getBalanceSheet(t);break;case"incomeStatement":s=l.aT.getIncomeStatement(e,a);break;case"cashFlowStatement":s=l.aT.getCashFlowStatement(e,a);break}s&&s.then(t=>{if(this.loading=!1,200===t.code)switch(this.activeReport){case"balanceSheet":this.balanceSheetData=t.data;break;case"incomeStatement":this.incomeStatementData=t.data;break;case"cashFlowStatement":this.cashFlowStatementData=t.data;break}else this.$message.error(t.message)}).catch(t=>{this.loading=!1,console.error("加载报表数据失败:",t),this.$message.error("加载报表数据失败")})},exportReport(){this.$message.info("报表导出中...");const t={reportType:this.getReportTypeLabel(),period:this.selectedPeriod};l.aT.exportReport(t).then(t=>{const e=new Blob([t.data]),a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=`${this.getReportTypeLabel()}_${this.selectedPeriod}.xlsx`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(a),this.$message.success("报表导出成功")}).catch(t=>{console.error("导出报表失败:",t),this.$message.error("导出报表失败")})},getReportTypeLabel(){switch(this.activeReport){case"balanceSheet":return"资产负债表";case"incomeStatement":return"利润表";case"cashFlowStatement":return"现金流量表";default:return"财务报表"}},formatPeriod(t){if(t.includes("-")){const e=t.split("-");if(2===e.length)return`${e[0]}年${e[1]}月`;if(3===e.length)return`${e[0]}年${e[1]}-${e[2]}月`}return t},formatCurrency(t){return"number"!==typeof t?"0.00":t.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})},getAssetsData(){if(!this.balanceSheetData)return[];const t=[];return t.push(...this.balanceSheetData.assets.流动资产),t.push(this.balanceSheetData.assets.流动资产合计),t.push(...this.balanceSheetData.assets.非流动资产),t.push(this.balanceSheetData.assets.非流动资产合计),t.push(this.balanceSheetData.assets.资产总计),t},getLiabilitiesAndEquityData(){if(!this.balanceSheetData)return[];const t=[];return t.push(...this.balanceSheetData.liabilities.流动负债),t.push(this.balanceSheetData.liabilities.流动负债合计),t.push(...this.balanceSheetData.liabilities.非流动负债),t.push(this.balanceSheetData.liabilities.非流动负债合计),t.push(this.balanceSheetData.liabilities.负债合计),t.push(...this.balanceSheetData.equity),t},getIncomeStatementData(){if(!this.incomeStatementData)return[];const t=[];return t.push(...this.incomeStatementData.operatingRevenue),t.push(...this.incomeStatementData.operatingCost),t.push(this.incomeStatementData.operatingProfit),t.push(...this.incomeStatementData.nonOperatingRevenue),t.push(...this.incomeStatementData.nonOperatingCost),t.push(this.incomeStatementData.nonOperatingProfit),t.push(this.incomeStatementData.totalProfit),t.push(...this.incomeStatementData.tax),t.push(this.incomeStatementData.netProfit),t},getCashFlowSummaryData(){if(!this.cashFlowStatementData)return[];const t=[];return t.push(this.cashFlowStatementData.netIncreaseInCash),t.push(this.cashFlowStatementData.beginningCashBalance),t.push(this.cashFlowStatementData.endingCashBalance),t}}},i=n,r=a(1656),c=(0,r.A)(i,s,o,!1,null,"689750f7",null),h=c.exports}}]);
//# sourceMappingURL=324.36e0aab3.js.map